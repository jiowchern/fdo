#include "stdafx.h"
#include "CDXUTDragDrop.h"

_BEGIN_DRAGDROP


	Manager::Manager() : mpInfo(0)
	{

	}
	//////////////////////////////////////////////////////////////////////////
	Manager::~Manager()
	{

	}
	//////////////////////////////////////////////////////////////////////////
	void Manager::Drag(Info* pInfo)
	{
	//	assert(mpInfo == 0);
		mpInfo = pInfo;		
	}
	//////////////////////////////////////////////////////////////////////////
	void Manager::Drop(Target* pTarget)
	{		
		if(pTarget&&mpInfo)
			pTarget->OnDrop(mpInfo);
				
	}
	//////////////////////////////////////////////////////////////////////////
	void Manager::DropNotTarget()
	{
		if(mpInfo)
			mpInfo->OnNotTarget();
		
	}
	//////////////////////////////////////////////////////////////////////////
	void Manager::DropEnd()
	{
		mpInfo = 0;
	}

	//////////////////////////////////////////////////////////////////////////
	void Manager::OnRender(int x,int y)
	{
		if(mpInfo)
			mpInfo->OnRender(x,y);
	}
	//////////////////////////////////////////////////////////////////////////
	Info* Manager::GetCurDDInfo()
	{
		return mpInfo;
	}

//////////////////////////////////////////////////////////////////////////
Info::Info(int nType) : mnType(nType)  ,mnSourceType(0),mpSelf(0)
{

}
//////////////////////////////////////////////////////////////////////////
Info::~Info()
{

}
//////////////////////////////////////////////////////////////////////////

void Info::_Drag()
{
	assert(mpMgr);
	mpMgr->Drag(this);
}
//////////////////////////////////////////////////////////////////////////
void Info::fnSetManager(Manager* m)
{
	mpMgr = m;
}
//////////////////////////////////////////////////////////////////////////
void Info::OnNotTarget()
{
	if(mpSelf)
		mpSelf->OnDropNotTarget(this);
}
//////////////////////////////////////////////////////////////////////////
Manager* Info::fnGetManager()
{
	return mpMgr;
}
//////////////////////////////////////////////////////////////////////////

Manager* Info::mpMgr = 0;
//////////////////////////////////////////////////////////////////////////
// void Info::OnRender(float f)
// {
// 	
// }
_END_DRAGDROP